jQuery(function(a){var i=location.pathname+location.search;a("#sidebar, .js-sidebar").each(function(e,t){a(t).find("ul a").filter('[href="'+i+'"]').removeClass("selected").filter(":eq(0)").addClass("selected")})}),jQuery(function(e){e('<span id="gotobottom">').appendTo("body");var t=e('<a class="gotobottom" title="Nach unten" href="#gotobottom">Nach unten</a>');e("a.gototop").attr("title","Nach oben").after(t)}),jQuery(function(e){var t=e.trim(e("h1 .current-project").text()),a=e.trim(document.title).replace(new RegExp("- "+t+".*"),""),i=e("p.breadcrumb");e('<span class="page-title">').html(a).appendTo(i),e('<span class="separator">').html("»").appendTo(i)}),jQuery(function(o){function e(a){var i,n="redmine_api_token",e=sessionStorage.getItem(n),s=(new Date).getTime();(e=e&&JSON.parse(e))&&e.updatedAt+1e4>s?a(e.token):(sessionStorage.setItem(n,null),i=function(e){var t=JSON.stringify({token:e,updatedAt:s});sessionStorage.setItem(n,t),a(e)},o.ajax({url:"/my/api_key",dataType:"text",success:function(e){var t=/<pre>(.*?)<\/pre>/.exec(e);t?i(t[1]):console.log("Could not collect api key!")}}))}function i(e,t){p=p||o('<nav class="cross-links">').appendTo("body");var a=e.title.replace(/_/g," "),i=e.labelPrefix?'<strong class="label-prefix">'+e.labelPrefix+"</strong>":"";o('<a class="cross-link">').html(i+e.label).attr({href:t+"/"+encodeURIComponent(e.id),title:a}).addClass("type-"+(e.type||"book")).appendTo(p)}var t,a,n,s,r,l=(t=o("#issue-form.edit_issue").attr("action"))?/\d+/.exec(t)[0]:null,d=o("#main-menu, .js-project-menu").find("a.wiki").attr("href")||null,c=(a=document.title+" "+o("h1, h2").text(),n={},a.replace(/#(\d+)/g,function(e,t){n[t]=t}),Object.keys(n)),p=null;l&&d&&(s=d+"/index.json",r=function(e){o.each(e.wiki_pages,function(e,t){var a;-1<t.title.indexOf("#"+l)&&(a=Object.assign({id:t.title,label:t.title.replace(/_/g," "),labelPrefix:"Briefing "},t),i(a,d))})},e(function(a){o.ajax({url:s,dataType:"json",beforeSend:function(e){var t=btoa(a+":x");e.setRequestHeader("Authorization","Basic "+t)},success:function(e){r(e)}})})),c.length&&o("#main-menu, .js-project-menu").find("a.wiki").is(".selected")&&o.each(c,function(e,t){i({title:"Ticket #"+t,id:t,label:"#"+t,labelPrefix:"Ticket ",type:"ticket"},"/issues")})}),jQuery(function(e){e(".wiki-page + .collapsible.collapsed").removeClass("collapsed")}),jQuery(function(a){a("code:not(:has(*))").each(function(e,t){(t=a(t)).attr({"data-label-copied":"Inhalt wurde in die Zwischenablage kopiert!","data-label-to-copy":"In die Zwischenablage kopieren","data-clipboard-action":"copy"}),t.addClass("has-clipboard-copy"),t.one("mouseover.mtoCopy focus.mtoCopy",function(){t.off(".mtoCopy"),t.attr({"data-clipboard-text":t.text()}),setClipboardJS(t.get(0)),t.on("click",function(){t.addClass("was-copied"),setTimeout(function(){t.removeClass("was-copied")},1e3)})})})});var PurpleMine=PurpleMine||{};PurpleMine.HistoryTabs=function(){"use strict";var n,s={en:{all:"All",notes:"Notes",details:"Changes"},ro:{all:"Toate",notes:"Note",details:"Schimbări"},fr:{all:"Tout",notes:"Remarques",details:"Changements"},pl:{all:"Wszystko",notes:"Notatki",details:"Zmiany"},de:{all:"Alles",notes:"Kommentare",details:"Änderungen"},ja:{all:"すべて",notes:"注記",details:"変更"}};var o=function(){var e=$(this),t=e.attr("data-tab");n.$tabs.removeClass("selected"),e.addClass("selected"),n.$history.removeClass("hide-details").removeClass("hide-notes"),"notes"===t?n.$history.addClass("hide-details"):"details"===t&&n.$history.addClass("hide-notes")};return function(){if(n)return n;var e,t,a,i;(n=this).$tabsContainer=null,this.$tabs=null,this.$history=$("#history"),this.lang=document.documentElement.lang,void 0===s[this.lang]&&(this.lang="en"),this._=s[this.lang],0<this.$history.length&&0<$("#history > h3").length&&(e="",i="</a></li>",e+='<div class="tabs"><ul>',e+=(t='<li><a href="javascript:;" class="')+"selected "+(a='history-tab" data-tab="')+'all">'+n._.all+i,e+=t+a+'notes">'+n._.notes+i,e+=t+a+'details">'+n._.details+i,e+="</ul></div>",n.$tabsContainer=$(e),$("#history > h3").after(n.$tabsContainer),n.$tabs=n.$tabsContainer.find(".history-tab"),n.$tabs.on("click",o),n.$history.find(".has-notes:first").addClass("first-of-notes"),n.$history.find(".has-details:first").addClass("first-of-details"))}}(),(PurpleMine=PurpleMine||{}).MenuCollapse=function(){"use strict";var n,t={en:{topMenuToggler:"Expand/collapse top menu"},ro:{topMenuToggler:"Deschide/închide meniul de sus"},fr:{topMenuToggler:"Développer/réduire le menu principal"},pl:{topMenuToggler:"Zwiń/rozwiń górne menu"},de:{topMenuToggler:"Ein-/Ausklappen Hauptmenu"},ja:{topMenuToggler:"トップメニューの展開/折りたたみ"}};function e(){if(n)return n;for(var e in(n=this).lang=document.documentElement.lang,void 0===t[this.lang]&&(this.lang="en"),this._=t[this.lang],this.menus={top:{$el:$("#top-menu")}},this.menus)this.menus.hasOwnProperty(e)&&0<this.menus[e].$el.length&&function(e){if("none"===n.menus[e].$el.css("maxHeight"))return;n.menus[e].collapsed=!0,window.localStorage&&(n.menus[e].collapsed=null===localStorage.getItem(a(e)));(function(e){var t=e+"-menu-toggler",a=n._[e+"MenuToggler"],i='<a href="javascript:;" class="'+t+'" title="'+a+'"></a>';n.menus[e].$toggler=$(i),n.menus[e].$el.prepend(n.menus[e].$toggler),n.menus[e].$toggler.on("click",{menu:e},n.toggleMenu)})(e),!1===n.isCollapsed(e)&&n.expandMenu(e)}(e)}function a(e){return"PurpleMine:"+e+"MenuExpanded"}return e.prototype.toggleMenu=function(e){var t=e.data.menu||"";n.isCollapsed(t)?n.expandMenu(t):n.collapseMenu(t)},e.prototype.isCollapsed=function(e){return this.menus[e].collapsed},e.prototype.expandMenu=function(e){this.menus[e].$el.addClass("expanded"),this.menus[e].$toggler.addClass("expanded"),this.menus[e].collapsed=!1,window.localStorage&&localStorage.setItem(a(e),"x")},e.prototype.collapseMenu=function(e){this.menus[e].$el.removeClass("expanded"),this.menus[e].$toggler.removeClass("expanded"),this.menus[e].collapsed=!0,window.localStorage&&localStorage.removeItem(a(e))},e}(),(PurpleMine=PurpleMine||{}).RevisionGraph=function(e,t,a){"use strict";var i=t,n=$.map(i,function(e){return e}),s=n.length-1,o=$("table.changesets tr.changeset");null!==revisionGraph?revisionGraph.clear():revisionGraph=new Raphael(e);var r=revisionGraph.set(),l=o.first().find("td").first().position().left-$(e).position().left,d=$(e).position().top,c=l+20*(a+1),p=o.last().position().top+o.last().height()-d;revisionGraph.setSize(c,p);var u,h,g,m,f,b,v,y=["#e74c3c","#584492","#019851","#ed820c","#4183c4"];if(a>=y.length){Raphael.getColor.reset();for(var C=0;C<=a;C++)y.push(Raphael.getColor(.9))}$.each(n,function(e,a){a.hasOwnProperty("space")||(a.space=0),g=o.eq(s-a.rdmid).position().top-d+17,h=10+l+20*a.space,revisionGraph.circle(h,g,3.5).attr({fill:y[a.space],stroke:"none"}).toFront(),$.each(a.parent_scmids,function(e,t){u=i[t],(u?(u.hasOwnProperty("space")||(u.space=0),f=o.eq(s-u.rdmid).position().top-d+17,m=10+l+20*u.space,u.space===a.space?revisionGraph.path(["M",h,g,"V",f]):revisionGraph.path(["M",h,g,"C",h,g,h,g+(f-g)/2,h+(m-h)/2,g+(f-g)/2,"C",h+(m-h)/2,g+(f-g)/2,m,f-(f-g)/2,m,f])):revisionGraph.path(["M",h,g,"V",p])).attr({stroke:y[a.space],"stroke-width":1.5}).toBack()}),(v=revisionGraph.circle(h,g,10)).attr({fill:"#000",opacity:0,cursor:"pointer",href:a.href}),null!==a.refs&&0<a.refs.length&&((b=document.createElementNS(revisionGraph.canvas.namespaceURI,"title")).appendChild(document.createTextNode(a.refs)),v.node.appendChild(b)),r.push(v)}),r.toFront()},$(function(){"use strict";window.drawRevisionGraph&&(window.drawRevisionGraph=PurpleMine.RevisionGraph,$(window).resize())}),(PurpleMine=PurpleMine||{}).SidebarToggler=function(){"use strict";var a,e={en:{toggler:"Toggle sidebar"},ro:{toggler:"Deschide/închide bara laterală"},fr:{toggler:"Basculer la barre latérale"},pl:{toggler:"Pokaż/ukryj panel boczny"},ja:{toggler:"サイドバーの切り替え"}};function t(){if(a)return a;(a=this).sidebarVisible=!0,this.sidebarHiding=null,this.$toggler=null,this.$main=$("#main"),this.$sidebar=$("#sidebar"),this.lang=document.documentElement.lang,void 0===e[this.lang]&&(this.lang="en"),this._=e[this.lang],"relative"===this.$main.css("position")&&$(window).on("load",function(){$("#context-menu").appendTo("#wrapper3")}),function(){window.localStorage&&(a.sidebarVisible=null===localStorage.getItem("PurpleMine:sidebarHidden"));0<a.$sidebar.length&&!1===a.$main.hasClass("nosidebar")&&(function(){var e='<a href="javascript:;" class="sidebar-toggler" title="'+a._.toggler+'"></a>';a.$toggler=$(e),a.$main.append(a.$toggler),a.$toggler.on("click",a.toggleSidebar)}(),function(){var t=document.getElementsByTagName("body")[0];window.onkeydown=function(e){t===e.target&&83===e.keyCode&&!1===e.ctrlKey&&!1===e.altKey&&!1===e.shiftKey&&a.toggleSidebar()}}(),!1===a.sidebarVisible&&a.hideSidebar(!0))}()}return t.prototype.toggleSidebar=function(){a.sidebarVisible?a.hideSidebar():a.showSidebar()},t.prototype.hideSidebar=function(e){!0===e?this.$sidebar.addClass("sidebar-hiding sidebar-hidden"):(this.$sidebar.addClass("sidebar-hiding"),this.sidebarHiding=setTimeout(function(){a.$sidebar.addClass("sidebar-hidden")},500)),this.$toggler.addClass("sidebar-hidden"),this.sidebarVisible=!1,window.localStorage&&localStorage.setItem("PurpleMine:sidebarHidden","x")},t.prototype.showSidebar=function(){clearTimeout(this.sidebarHiding),a.$sidebar.removeClass("sidebar-hidden"),setTimeout(function(){a.$sidebar.removeClass("sidebar-hiding")},50),this.$toggler.removeClass("sidebar-hidden"),this.sidebarVisible=!0,window.localStorage&&localStorage.removeItem("PurpleMine:sidebarHidden")},t}(),$(function(){"use strict";new PurpleMine.SidebarToggler,new PurpleMine.HistoryTabs,new PurpleMine.MenuCollapse});